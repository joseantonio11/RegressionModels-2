# Regression Models: Course Project

## Executive Summary

## Analysis

### Loading useful packages for the analysis
```{r}
require(stats); require(graphics)

```
### Loading and preprocessing the data
```{r}
data(mtcars)

mtcars$am[mtcars$am =="0"] <- "automatic"
mtcars$am[mtcars$am =="1"] <- "manual"


mtcars$am <- as.factor(mtcars$am)
boxplot(mtcars$mpg~ mtcars$am, col=c(2,3))

```
### Is an automatic or manual transmission better for MPG: Hypothesis Test

For a basic answer to this question we perform a hypothesis test. The Null hypothesis ($H_0$) is that automatic and manual transmission does not make a difference to MPG (both means come from the same distribution)

The alternative hypothesis ($H_1$) is that manual is better for MPG than automatic. We perform a non-paired t-test

```{r}
ya <- mtcars$mpg[mtcars$am == "automatic"]
ym <- mtcars$mpg[mtcars$am == "manual"]

compare <- t.test(x=ym, y=ya, paired=FALSE)

```

It appears that according to the results of the two sided `r compare$method`, manual is better than automatic for MPG. We report a p-value of `r compare$p.value` and confidence intervals: (`r compare$conf.int[1]`, `r compare$conf.int[2]`).

### Quantifying how different is the MPG between automatic and manual transmissions: Fitting linear models

Fitting a simple linear model involving only the type of transmission as a predictor confirms the results of the hypothesis test:

```{r}
model_am <- lm(mpg ~ am, data=mtcars)

summary(model_am)
```

However before proceeding to conclusions, it is usefull to investigate for the presence of confounding variables, since our data is rich in information:

```{r}

mtcars$cyl <- as.factor(mtcars$cyl)
mtcars$gear <- as.factor(mtcars$gear)
mtcars$carb <- as.factor(mtcars$carb)
mtcars$vs <- as.factor(mtcars$vs)

#model_all <- lm(mpg ~ . , data=mtcars)
```
We attempt to fit a model with weight as confounder where there is no interaction between the weight and transmission type variables:
```{r}

m_unint <- lm(mpg ~ am + wt, data=mtcars)

summary(m_unint)
```
Already we see that the observed effect of the type of transmission to the MPG gets dwarved by the confounding strength of the weight variable. We proceed to fit a model where there is interaction between the two predictors:
```{r}
m_int <- lm(mpg ~ am + wt + am*wt, data=mtcars)

summary(m_int)
anova(m_int,m_unint)
```

Fitting a multivariable linear model tells a different story. 

## Conclusions

## Apendix
